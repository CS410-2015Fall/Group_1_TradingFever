<!doctype html>
<html>
	<head>
		<!-- Loading Libraries-->
		<script src="externalLibrary/d3/d3.min.js"></script>
		<script src="externalLibrary/jquery.min.js"></script>
		<script src="externalLibrary/bootstrap/js/bootstrap.min.js"></script>
		<script src="externalLibrary/resizer/jquery.resize.js"></script>
		<script src="externalLibrary/sweetalert-master/dist/sweetalert.min.js"></script>
		<script type="text/javascript" charset="utf-8" src="cordova.js"></script>  <!-- Include this line for mobile build-->
		<link rel="stylesheet" href="externalLibrary/bootstrap/css/bootstrap.min.css">

		<!--link rel="stylesheet" href="externalLibrary/jquerymobile/jquery.mobile-1.4.5.min.css"-->
		<!--script src="externalLibrary/jquerymobile/jquery.mobile-1.4.5.min.js"></script-->

		<script src="js/modal.js"></script>
		<link rel="stylesheet" href="css/index.css">
		<link rel="stylesheet" href="externalLibrary/sweetalert-master/dist/sweetalert.css" />

		<script src="class/Stocks.js"></script>
		<script src="class/Avatar.js"></script>
		<script src="class/Login.js"></script>
		<script src="class/Investment.js"></script>
		<script src="class/StartUp.js"></script>
		<script src="class/RealEstate.js"></script>
		<script src="class/LotteryTicket.js"></script>
		<script src="class/LoanSharks.js"></script>
		<script src="class/NigerianPrince.js"></script>
		<script src="class/Bitcoin.js"></script>
		<script src="class/HedgeFund.js"></script>
		<script src="js/UIControl/index.js"></script>
		<script src="json/listofInvestments.json"></script>
		<script src="js/UIControl/InvestmentPage.js"></script>
		<script src="js/UIComponent/investmentItemDisplay.js"></script>

		<script src="class/callback.js"></script>
		<script src="js/camera.js"></script>
		<script src="js/loadGame.js"></script>
		<title>Trading Fever</title>
		<style>

		#showReturn {
	    	border-radius: 1em;
	    	background: #000000;
	    	padding: 0.25em; 
	    	width: 20em;
	    	height: 2em;    
	    	margin-left: auto;
	   	 	margin-right: auto;
		}	


		svg {
			font: 10px sans-serif;
		}

		.line {
			fill: none;
			stroke: #000;
			stroke-width: 1.5px;
		}

		.axis path,
		.axis line {
			fill: none;
			stroke: #000;
			shape-rendering: crispEdges;
		}
		</style>
		<script>
		loadGame();
			document.addEventListener("deviceready",onDeviceReady,false);
			function onDeviceReady() {
				pictureSource=navigator.camera.PictureSourceType;
				destinationType=navigator.camera.DestinationType;
			}
			theStocks = new Stocks();
		</script>
	</head>
	<body style="font-size:5vmin;">
		
		
		<div class="modal fade" id="profileModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title">Profile</h4>
					</div>
					
					<div class="modal-body">
						<table><tr>
							<td>
								<img id="avatarPicture_modal" src="img/profile_empty.jpg" style="width:5em"/><br />
								<button onclick="capturePhoto()" style="width:5em;">Take new Photo</button>
								
							</td>
							<td><table>
								<tr><td id="avatarName_modal">(Name)</td></tr>
								<tr><td>Networth:$<span id="avatarNetworth_modal">(Networth)</span></td></tr>
							</table></td>
						</tr></table>
					</div>
					
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
		<div class="modal fade" id="investmentInfoModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title"><span id="investmentInfo_name">Investment Detail</span></h4>
					</div>
					
					<div class="modal-body">
						<table><tr>
							<td>
								<img id="investmentPicture_modal" src="img/profile_empty.jpg" style="width:5em"/><br />
							</td>
							<td><table>
								<tr><td id="investmentDescription_modal">(description)</td></tr>
							</table></td>
						</tr></table>
					</div>
					
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
		<div class="modal fade" id="newAvatarModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title"><span>What is Your Name?</span></h4>
					</div>
					
					<div class="modal-body">
						<input type="text" name="avatarName" id="txtNewAvatarName"><br />
						<button onclick="createAvatar()">Submit</button>
					</div>
					
					<div class="modal-footer">
					</div>
				</div>
			</div>
		</div>
		<script>
			
			/*
			theAvatar = new Avatar("Daniel");
			theAvatar.setID(48927123);
			theAvatar.setCashAmount(1000000);
			theAvatar.setRage(100);
			
			
			*/
			
		</script>
		<div id="statusBar" style="height:10vh; background-color:black">
			<table style="width:100%; height:100%"><tr>
				<!--td><table data-toggle="modal" data-target="#profileModal"><tr-->
				<td><table data-toggle="modal" onclick="$('#profileModal').modal()"><tr>
					<td id="avatarPictureHolder">
						<img id="avatarPicture" src="img/profile_empty.jpg" style="height:1.8em"/>
					</td>
					<td id="avatarInfo" style="height:100%">
						<div id="avatarName_display" style="color:white;">
							(Name)
						</div>
					</td>
				</tr></table></td>
				<td id="avatarCash_display" style="height:100%; color:white; text-align:right">
					(Cash Amount)
				</td>
			</tr></table>
		</div>
		
		<div class="bs-example bs-example-tabs" data-example-id="togglable-tabs" id="gameTabWidget">
			<ul id="gameTabs" class="nav nav-tabs" role="tablist">
				<li role="presentation" class="active">
					<a href="#gameHome" id="game-home-tab" role="tab" data-toggle="tab" aria-controls="home" aria-expanded="true">Home</a>
				</li>
				<li role="presentation" class="">
					<a href="#stockPage" role="tab" id="stockPage-tab" data-toggle="tab" aria-controls="profile" aria-expanded="false">Stock</a>
				</li>
				<li role="presentation" class="">
					<a href="#investmentPage" role="tab" id="investmentPage-tab" data-toggle="tab" aria-controls="profile" aria-expanded="false">Investments</a>
				</li>
			</ul>
			<div id="myTabContent" class="tab-content">
				<div role="tabpanel" class="tab-pane active in" id="gameHome" aria-labelledby="game-home-tab">
					<!--p>Content for home page goes here</p-->
					<!--img src="img/room.jpg" style="width:100%; height:80vh"/-->
					<fb:login-button autologoutlink="true" scope="public_profile,email,user_friends" onlogin="checkLoginState();"></fb:login-button>
					<script>
						/*
						theAvatar.updateRemoteCash();
						theAvatar.setCashAmount(5000000);

						function updateDatabase(){
							theAvatar.setRemoteCash();
						}
						setInterval(updateDatabase,1000);
						*/
					</script>
					

					<!-- animation -->
					<div id="animation" align="center"> 

						<img src="img/setup0_0.jpg" />
						
						<img src="img/setup0_2.jpg" />
						<img src="img/setup0_3.jpg" />
						<img src="img/setup0_4.jpg" />
						<img src="img/setup0_5.jpg" />
						<img src="img/setup0_6.jpg" />
						<img src="img/setup0_7.jpg" />
						<img src="img/setup0_8.jpg" />
						<img src="img/setup0_9.jpg" />
						<img src="img/setup0_10.jpg" />
						<img src="img/setup0_11.jpg" />
						<img src="img/setup0_12.jpg" />
						<img src="img/setup0_13.jpg" />
						<img src="img/setup0_14.jpg" />
						<img src="img/setup0_15.jpg" />
	
					</div> 

					<script>
					onload = function startAnimation() { 
						var frames = document.getElementById("animation").children;
						var frameCount = frames.length;
						var i = 0;
						setInterval(function () { 
							frames[i % frameCount].style.display = "none";
							frames[++i % frameCount].style.display = "block";
						}, 100); 
					} 
					</script>

					<style>
					#animation img {
						width: 17em;
    					height: 18em;
						display: none;
					}
					#animation img:first-child {
						display: block;
					} 
					</style>
					<!-- end of animation -->



					<div id="status"></div>
					<button class="btn" style="width:80%; font-size:1em;" onclick="post()">post to facebook</button>
				</div>
				<div role="tabpanel" class="tab-pane" id="stockPage" aria-labelledby="stockPage-tab">
					<p>
						<p id="showReturn" style="font-size:1em; width:100%" align="center"></p>


						<div id = "stocks"></div>
						<table style="width:100%">
							<tr>
								<td><button id = 'buybutton' style="background-color:lightgreen; font-size:1m; width:100%;">Buy</button></td>
								<td>
									<select style="font-size:1em; width:100%" id="invSize">
										<option value=100>100 shares</option>
										<option value=500>500 shares</option>
										<option value=1000>1,000 shares</option>
										<option value=5000>5,000 shares</option>
										<option value=10000>10,000 shares</option>
									</select>
								</td>
								
								<td><button id = 'sellbutton' style="background-color:red; font-size:1m; width:100%;">Sell</button></td> 
								<script>
									function getInvestmentSize(){
										var selIndex = document.getElementById("invSize").selectedIndex;
										var toReturn = document.getElementById("invSize").options[selIndex].value;
										return Number(toReturn);
									}
								</script>
							</tr>
							
						</table>

						<div id="stockPrice"></div>

						<div id="netLiquidation"></div>

						<div id="shares"></div>

						<div id="securitiesGPV"></div>

						<div id="cash"></div>

						<div id="availableFunds"></div>

						<div id="leverage"></div>

						<div id="transactionFee"></div>
						<table style = "width:100%">
							<tr>
								<td><button id = 'outbutton'>Transfer $10k out</button></td>
								<td><button id = 'inbutton'>Transfer $10k in</button></td>

							</tr>
						</table>

					</p>
				</div>
				<div role="tabpanel" class="tab-pane" id="investmentPage" aria-labelledby="investmentPage-tab" href="#investments"></div>
			</div>
		</div>
		
		<script>
			var aLotteryTicket = new LotteryTicket();
			aLotteryTicket.setPotentialReturn(100);
			aLotteryTicket.setInvestmentTitle('Lotto 649');
			aLotteryTicket.setDescription('A ticket to prosperity');
			theAvatar.addInvestmentInstance(aLotteryTicket);
			//theAvatar.upgradeInvestment(aLotteryTicket);
			aLotteryTicket.setImgURL('img/lotto.jpg');
		
			var aLoanShark = new LoanSharks();
			aLoanShark.setPotentialReturn(100);
			aLoanShark.setInvestmentTitle('Loan Sharks');
			aLoanShark.setDescription("A new acquaintance offers to help invest your extra cash");
			theAvatar.addInvestmentInstance(aLoanShark);
			//theAvatar.upgradeInvestment(aLoanShark);
			aLoanShark.setImgURL('img/loanshark.jpg');
			
			var aNigerianPrince = new NigerianPrince();
			aNigerianPrince.setPotentialReturn(100);
			aNigerianPrince.setInvestmentTitle('Nigerian Email');
			aNigerianPrince.setDescription("Dear Sir: I have been requested by the Nigerian National Petroleum Company to contact you for assistance in resolving a matter.\n Yours truly, \n" + "\nPrince Alyusi Islassis");
			theAvatar.addInvestmentInstance(aNigerianPrince);
			//theAvatar.upgradeInvestment(aNigerianPrince);
			aNigerianPrince.setImgURL('img/nigerian.png');
			
			
			var aStartUp = new StartUp();
			aStartUp.setPotentialReturn(100);
			aStartUp.setInvestmentTitle('Daniel Inc.');
			aStartUp.setDescription("Your friend's startup is certainly the next big thing");
			theAvatar.addInvestmentInstance(aStartUp);
			//theAvatar.upgradeInvestment(aStartUp);
			aStartUp.setImgURL('img/daniel.jpg');
			
			
			var aRealEstate = new RealEstate();
			aRealEstate.setMonthlyReturn(10);
			aRealEstate.setInvestmentTitle('Prime Real Estate');
			aRealEstate.setDescription('A pricey piece of property');
			theAvatar.addInvestmentInstance(aRealEstate);
			//theAvatar.upgradeInvestment(aRealEstate);
			aRealEstate.setImgURL('img/realestate.jpg');
			
			
			var aBitcoin = new Bitcoin();
			aBitcoin.setPotentialReturn(100);
			aBitcoin.setInvestmentTitle('Virtual Currencies');
			aBitcoin.setDescription("Clearly, the end of fiat currency is here.");
			theAvatar.addInvestmentInstance(aBitcoin);
			//theAvatar.upgradeInvestment(aBitcoin);
			aBitcoin.setImgURL('img/bitcoin.jpg');

			var aHedgeFund = new HedgeFund();
			aHedgeFund.setPotentialReturn(100);
			aHedgeFund.setInvestmentTitle('Investment Fund');
			aHedgeFund.setDescription("Your investment advisor tells you to invest with a secure investment fund run by a jolly old man. He's been on Wall Street for decades-what could go wrong?");
			theAvatar.addInvestmentInstance(aHedgeFund);
			//theAvatar.upgradeInvestment(aHedgeFund);
			aHedgeFund.setImgURL('img/scheme.jpg');

			mkInvestmentPage();
		</script>
		
		<script>
			initialLoad();
			function callRefreshStatusBar(){
				refreshStatusBar(theAvatar);
			}
			setInterval(callRefreshStatusBar,100); // calls callRefreshStatusBar() every 0.1 seconds
		</script>
		
		<script src = "class/Simulation.js"></script>
	</body>
</html>